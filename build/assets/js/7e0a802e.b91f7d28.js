"use strict";(self.webpackChunkmaterial=self.webpackChunkmaterial||[]).push([[4993],{180:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>t,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Criptografia/Hardware/HSM","title":"HSM","description":"Vamos imaginar a seguinte situa\xe7\xe3o: voc\xea tem um segredo valioso. Mas n\xe3o \xe9 qualquer segredo. \xc9 daquele tipo que, se vazar, compromete todo o sistema para sempre. Um segredo que precisa ser guardado em um lugar onde nem mesmo o pr\xf3prio sistema operacional tem permiss\xe3o para olhar tipo ~A senha da conta banc\xe1ria do dono do tigrinho~ segredos de Estado.","source":"@site/docs/Criptografia/Hardware/HSM.md","sourceDirName":"Criptografia/Hardware","slug":"/Criptografia/Hardware/HSM","permalink":"/material/Criptografia/Hardware/HSM","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Criptografia/Hardware/HSM.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"HSM","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Hardware e Criptografia?","permalink":"/material/Criptografia/Hardware/"},"next":{"title":"TPM","permalink":"/material/Criptografia/Hardware/TPM"}}');var i=n(4848),s=n(8453);n(2362);const o={title:"HSM",sidebar_position:1},t="HSM - Hardware Security Module",c={},d=[{value:"1. O que \xe9 um HSM?",id:"1-o-que-\xe9-um-hsm",level:2},{value:"1.1 Como a gente se comunica com ele?",id:"11-como-a-gente-se-comunica-com-ele",level:3},{value:"2. O papel do HSM na seguran\xe7a real",id:"2-o-papel-do-hsm-na-seguran\xe7a-real",level:2},{value:"Refer\xeancia",id:"refer\xeancia",level:3}];function l(e){const a={a:"a",del:"del",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"hsm---hardware-security-module",children:"HSM - Hardware Security Module"})}),"\n",(0,i.jsxs)(a.p,{children:["Vamos imaginar a seguinte situa\xe7\xe3o: voc\xea tem um segredo valioso. Mas n\xe3o \xe9 qualquer segredo. \xc9 daquele tipo que, se vazar, compromete todo o sistema para sempre. Um segredo que precisa ser guardado em um lugar onde nem mesmo o pr\xf3prio sistema operacional tem permiss\xe3o para olhar tipo ",(0,i.jsx)(a.del,{children:"A senha da conta banc\xe1ria do dono do tigrinho"})," segredos de Estado."]}),"\n",(0,i.jsxs)(a.p,{children:["Nesse cen\xe1rio, simplesmente armazenar em disco criptografado, esconder em mem\xf3ria, ou confiar que o software vai se comportar... n\xe3o \xe9 suficiente, porque at\xe9 o momento voc\xea j\xe1 entendeu que no mundo da criptografia \xe9 tudo uma quest\xe3o de quando, quando esse algoritmo que usamos vai ser quebrado. Para solucionar isso ",(0,i.jsx)(a.del,{children:"Ou tentar"})," entra o Hardware Security Module, ou como a galera do setor chama: HSM."]}),"\n",(0,i.jsx)(a.h2,{id:"1-o-que-\xe9-um-hsm",children:"1. O que \xe9 um HSM?"}),"\n",(0,i.jsx)(a.p,{children:"Pense num tipo de cofre que, al\xe9m de guardar a chave, usa essa chave para fazer criptografia pra voc\xea, sem nunca te mostrar a chave(sim isso \xe9 poss\xedvel). Esse \xe9 o HSM,  Um dispositivo f\xedsico, isolado, projetado para realizar opera\xe7\xf5es criptogr\xe1ficas seguras sem nunca deixar que a chave privada escape \u2014 nem mesmo para quem est\xe1 do outro lado da opera\xe7\xe3o."}),"\n",(0,i.jsx)(a.p,{children:"Ele gera, armazena, usa e, quando for a hora, destr\xf3i chaves criptogr\xe1ficas, sem nunca deixar que essas chaves saiam de dentro do pr\xf3prio hardware. \xc9 como se fosse um funcion\xe1rio que tranca e destranca o cofre sem nunca te dar a combina\xe7\xe3o."}),"\n",(0,i.jsx)(a.p,{children:"Por isso, o HSM \xe9 o cora\xe7\xe3o de infraestruturas cr\xedticas: bancos, datacenters, provedores de nuvem, autoridades certificadoras."}),"\n",(0,i.jsx)("p",{style:{textAlign:"center"},children:" Placa HSM"}),"\n",(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)("img",{src:"../../img/HSM.jpg ",width:"500px",heigth:"400px"})}),"\n",(0,i.jsx)("p",{}),"\n",(0,i.jsxs)(a.p,{children:["Diferente de bibliotecas de software como ",(0,i.jsx)(a.strong,{children:"OpenSSL"})," que rodam no seu sistema operacional, o HSM \xe9 um hardware dedicado. Um chip com blindagem, sensores, microcontroladores e um firmware pr\xf3prio que roda dentro de uma caixa selada que foi projetada para ser inviol\xe1vel."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Se voc\xea tentar abrir?"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Ele apaga as chaves."}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Se voc\xea superaquecer?"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Ele entra em modo de p\xe2nico."}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Se voc\xea tentar analisar o consumo de energia, escutar sinais eletromagn\xe9ticos, medir frequ\xeancia ou tens\xe3o?"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Boa sorte. HSMs s\xe3o projetados para detectar tudo isso e reagir antes que voc\xea consiga coletar algo \xfatil."}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"Isso se chama resili\xeancia f\xedsica a ataques \u2014 e \xe9 o que transforma um HSM em um cofre que n\xe3o apenas guarda, mas reage, ou seja, essa plaquinha \xe9 uma coisa surreal."}),"\n",(0,i.jsx)(a.h3,{id:"11-como-a-gente-se-comunica-com-ele",children:"1.1 Como a gente se comunica com ele?"}),"\n",(0,i.jsx)(a.p,{children:"Obviamente, o HSM n\xe3o vai abrir um socket e dizer \u201cmanda a\xed o que quer que eu assine\u201d. Existe toda uma camada de comunica\xe7\xe3o segura e padronizada, baseada em APIs como:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.a,{href:"https://www.ibm.com/docs/en/linux-on-systems?topic=introduction-what-is-pkcs-11",children:"PKCS#11"})," (o mais comum),"]}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://en.wikipedia.org/wiki/Microsoft_CryptoAPI",children:"Microsoft CAPI/CNG"})}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.ibm.com/docs/pt-br/i/7.5.0?topic=security-java-cryptography-extension",children:"Java JCE"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"Esses padr\xf5es permitem que o sistema operacional ou a aplica\xe7\xe3o \u201cpe\xe7a\u201d para o HSM executar uma opera\xe7\xe3o \u2014 assinar, decifrar, gerar uma chave \u2014 sem nunca tocar diretamente na chave privada, ou seja voc\xea s\xf3 v\xea o resultado. A chave permanece trancada."}),"\n",(0,i.jsx)(a.p,{children:"N\xe3o importa se o seu sistema est\xe1 infectado, se o kernel foi comprometido, se h\xe1 malware em execu\xe7\xe3o: o segredo permanece inacess\xedvel gra\xe7as ao HSM."}),"\n",(0,i.jsx)(a.h2,{id:"2-o-papel-do-hsm-na-seguran\xe7a-real",children:"2. O papel do HSM na seguran\xe7a real"}),"\n",(0,i.jsx)(a.p,{children:"Se for para a gente falar mais s\xe9rio sobre seguran\xe7a \u2014 e aqui vale para qualquer profissional de cybersecurity\u2014 voc\xea vai esbarrar no HSM. Provavelmente antes do que imagina."}),"\n",(0,i.jsxs)(a.p,{children:["Toda cadeia de confian\xe7a digital, como uma infraestrutura de chave p\xfablica (PKI), come\xe7a com uma chave raiz. Essa chave raiz assina certificados, autentica entidades, garante que \u201ceste site \xe9 realmente quem diz ser\u201d. ",(0,i.jsx)(a.em,{children:"E adivinha onde essa chave fica? Dentro de um HSM."})]}),"\n",(0,i.jsxs)(a.p,{children:["Sem HSM, qualquer comprometimento no servidor exp\xf5e a chave privada. E ",(0,i.jsx)(a.strong,{children:"quando a chave raiz \xe9 comprometida, todo o sistema colapsa"}),", por isso o HSM \xe9 o guardi\xe3o da confian\xe7a. Literalmente."]}),"\n",(0,i.jsx)(a.p,{children:"E n\xe3o \xe9 s\xf3 para certificado:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Assinatura de c\xf3digo"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Prote\xe7\xe3o de carteiras de criptomoeda"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Transa\xe7\xf5es financeiras"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Tokens de autentica\xe7\xe3o"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Sistemas de voto eletr\xf4nico"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Autentica\xe7\xe3o de firmware de dispositivos embarcados"}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"Se h\xe1 algo valioso e digital, provavelmente est\xe1 protegido por um HSM."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"Organiza\xe7\xf5es que operam com dados sens\xedveis ou transa\xe7\xf5es financeiras (ex: bancos, e-commerces, operadoras de cart\xe3o) precisam seguir normas rigorosas, como:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.entrust.com/pt/resources/learn/what-fips-140-2",children:"FIPS 140-2/3"})}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.akamai.com/pt/glossary/what-is-pci-dss",children:"PCI-DSS"})}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.a,{href:"https://www.entrust.com/resources/learn/common-criteria",children:"Common Criteria"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"E advinha quem \xe9 o item obrigat\xf3rio no checklist de seguran\xe7a criptogr\xe1fica? Sim: o HSM."}),"\n",(0,i.jsx)(a.p,{children:"Hoje, ele \xe9 implementado de duas formas:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"On-premise: o dispositivo f\xedsico no seu datacenter."}),"\n"]}),"\n",(0,i.jsxs)(a.li,{children:["\n",(0,i.jsx)(a.p,{children:"HSM as a Service: solu\xe7\xe3o em nuvem, com o mesmo n\xedvel de seguran\xe7a, escal\xe1vel e auditada."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"Se voc\xea est\xe1 pensando em algo como AWS CloudHSM, Azure Key Vault HSM, ou Google Cloud HSM \u2014 \xe9 disso que estamos falando."}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.em,{children:"Nenhuma criptografia se sustenta se voc\xea guardar a chave no lugar errado!"})}),"\n",(0,i.jsx)(a.h3,{id:"refer\xeancia",children:"Refer\xeancia"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://doc9.com.br/blog/hardware-security-module/",children:"https://doc9.com.br/blog/hardware-security-module/"})}),"\n"]})]})}function m(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},2362:(e,a,n)=>{n.d(a,{A:()=>P});var r=n(6540),i=n(4848);function s(e){const{mdxAdmonitionTitle:a,rest:n}=function(e){const a=r.Children.toArray(e),n=a.find((e=>r.isValidElement(e)&&"mdxAdmonitionTitle"===e.type)),s=a.filter((e=>e!==n)),o=n?.props.children;return{mdxAdmonitionTitle:o,rest:s.length>0?(0,i.jsx)(i.Fragment,{children:s}):null}}(e.children),s=e.title??a;return{...e,...s&&{title:s},children:n}}var o=n(4164),t=n(539),c=n(204);const d="admonition_xJq3",l="admonitionHeading_Gvgb",m="admonitionIcon_Rf37",u="admonitionContent_BuS1";function h(e){let{type:a,className:n,children:r}=e;return(0,i.jsx)("div",{className:(0,o.A)(c.G.common.admonition,c.G.common.admonitionType(a),d,n),children:r})}function p(e){let{icon:a,title:n}=e;return(0,i.jsxs)("div",{className:l,children:[(0,i.jsx)("span",{className:m,children:a}),n]})}function x(e){let{children:a}=e;return a?(0,i.jsx)("div",{className:u,children:a}):null}function j(e){const{type:a,icon:n,title:r,children:s,className:o}=e;return(0,i.jsxs)(h,{type:a,className:o,children:[r||n?(0,i.jsx)(p,{title:r,icon:n}):null,(0,i.jsx)(x,{children:s})]})}function f(e){return(0,i.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})})}const g={icon:(0,i.jsx)(f,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)",children:"note"})};function v(e){return(0,i.jsx)(j,{...g,...e,className:(0,o.A)("alert alert--secondary",e.className),children:e.children})}function w(e){return(0,i.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})})}const S={icon:(0,i.jsx)(w,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)",children:"tip"})};function M(e){return(0,i.jsx)(j,{...S,...e,className:(0,o.A)("alert alert--success",e.className),children:e.children})}function H(e){return(0,i.jsx)("svg",{viewBox:"0 0 14 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})})}const q={icon:(0,i.jsx)(H,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)",children:"info"})};function b(e){return(0,i.jsx)(j,{...q,...e,className:(0,o.A)("alert alert--info",e.className),children:e.children})}function C(e){return(0,i.jsx)("svg",{viewBox:"0 0 16 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})})}const A={icon:(0,i.jsx)(C,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.warning",description:"The default label used for the Warning admonition (:::warning)",children:"warning"})};function y(e){return(0,i.jsx)("svg",{viewBox:"0 0 12 16",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})})}const z={icon:(0,i.jsx)(y,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)",children:"danger"})};const N={icon:(0,i.jsx)(C,{}),title:(0,i.jsx)(t.A,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)",children:"caution"})};const k={...{note:v,tip:M,info:b,warning:function(e){return(0,i.jsx)(j,{...A,...e,className:(0,o.A)("alert alert--warning",e.className),children:e.children})},danger:function(e){return(0,i.jsx)(j,{...z,...e,className:(0,o.A)("alert alert--danger",e.className),children:e.children})}},...{secondary:e=>(0,i.jsx)(v,{title:"secondary",...e}),important:e=>(0,i.jsx)(b,{title:"important",...e}),success:e=>(0,i.jsx)(M,{title:"success",...e}),caution:function(e){return(0,i.jsx)(j,{...N,...e,className:(0,o.A)("alert alert--warning",e.className),children:e.children})}}};function P(e){const a=s(e),n=(r=a.type,k[r]||(console.warn(`No admonition component found for admonition type "${r}". Using Info as fallback.`),k.info));var r;return(0,i.jsx)(n,{...a})}},8453:(e,a,n)=>{n.d(a,{R:()=>o,x:()=>t});var r=n(6540);const i={},s=r.createContext(i);function o(e){const a=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);